# ==================================================================================================
# mpox-yolov10 / HOST-YOLOv10
# requirements.txt (reproducible, publication-grade)
# --------------------------------------------------------------------------------------------------
# Purpose
#   Python dependencies for training, evaluation, and inference of HOST-YOLOv10 for mpox lesion
#   detection and clinical-stage classification (macules, papules, vesicles, pustules, scabs).
#
# Reproducibility policy
#   - Critical frameworks are pinned (Ultralytics, Torch family).
#   - Scientific stack is constrained to avoid ABI breakage (e.g., numpy<2).
#   - Runtime libraries for visualization/metrics are included.
#   - Optional extras (ROS message helpers, tracking) are included when they commonly appear in
#     Ultralytics pipelines, but are safe if unused.
#
# Notes for CPU vs CUDA
#   Torch wheels depend on your platform and CUDA version.
#   - CPU-only (simple): keep torch/torchvision pinned below; pip will select CPU wheels when CUDA
#     wheels are not applicable.
#   - CUDA (recommended): install matching torch wheels (e.g., cu121/cu118) as needed. If you use
#     a CUDA base image, ensure torch wheels match that CUDA runtime.
#
# PEP 440 constraints are used where appropriate.
# ==================================================================================================

# --------------------------
# Core numerical & scientific stack
# --------------------------
numpy<2
scipy>=1.10.0,<1.13
pandas>=2.0.0,<2.3

# --------------------------
# Computer vision and image I/O
# --------------------------
opencv-python>=4.8.1.78,<4.11
Pillow>=10.0.0,<11.0
imageio>=2.31.0,<2.35

# --------------------------
# Deep learning backend
# --------------------------
# Pinned for stability. If you need a specific CUDA build, install the corresponding wheels.
torch>=2.1.0,<2.5
torchvision>=0.16.0,<0.20

# --------------------------
# Ultralytics (YOLOv10 support)
# --------------------------
ultralytics==8.4.6

# --------------------------
# Utilities frequently used by Ultralytics (logging, config, progress, etc.)
# --------------------------
PyYAML>=6.0.1,<6.1
tqdm>=4.66.0,<4.67
requests>=2.31.0,<2.33
psutil>=5.9.0,<6.0
rich>=13.7.0,<14.0
packaging>=23.2,<25.0
typing-extensions>=4.4.0,<5.0

# --------------------------
# Metrics, plots, and reporting (for PR curves, confusion matrices, etc.)
# --------------------------
matplotlib>=3.8.0,<3.10
seaborn>=0.13.0,<0.14
scikit-learn>=1.3.0,<1.6

# Optional but useful for statistics and nicer reports
statsmodels>=0.14.0,<0.15

# --------------------------
# Annotation formats / COCO utilities (often required for exporting/eval)
# --------------------------
pycocotools>=2.0.7,<2.0.9

# --------------------------
# Tracking / assignment solver
# (Even when tracking is disabled, some pipelines import these utilities.)
# --------------------------
lap>=0.5.12,<0.6

# --------------------------
# Optional: experiment tracking (disable if you do not use)
# --------------------------
# tensorboard>=2.14,<2.18
# wandb>=0.16,<0.18

# --------------------------
# Optional: model export runtimes (enable only if you export to these formats)
# --------------------------
# onnx>=1.15,<1.17
# onnxruntime>=1.16,<1.19
# openvino>=2024.0.0

# --------------------------
# Optional: deterministic behavior helpers (for strict reproducibility)
# --------------------------
# torchmetrics>=1.2,<1.6
# lightning>=2.1,<2.5

# ==================================================================================================
# Practical notes for reviewers / reproducibility statements
# --------------------------------------------------------------------------------------------------
# 1) numpy<2 prevents ABI-related breakages in many binary wheels (OpenCV, some Torch ecosystems).
# 2) Ultralytics is pinned to 8.4.6 to ensure consistent YOLOv10 behavior across runs.
# 3) Torch/Torchvision are constrained for stability. For CUDA, install matching wheels:
#    - Example (CUDA 12.1):
#        pip install --index-url https://download.pytorch.org/whl/cu121 torch==2.3.1 torchvision==0.18.1
#    Adapt versions to your environment and keep them within the constraints above.
# 4) scikit-learn + matplotlib/seaborn enable reproducible PR/ROC plots and confusion matrices.
# ==================================================================================================
